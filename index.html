<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VOW å› Â· å©šç¤¼ç›´æ’­å¹³å°</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;600&family=Noto+Sans+SC:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --ivory: #faf7f2; --cream: #f3ede3; --gold: #c9a96e;
  --gold-light: #e8d5b0; --gold-dark: #a07840;
  --charcoal: #2c2620; --muted: #8a7d72;
  --red: #c0392b; --red-light: #e74c3c;
  --green: #27ae60; --rose: #d4a5a0;
}
html { scroll-behavior: smooth; }
body { font-family: 'Noto Sans SC','PingFang SC','Microsoft YaHei',sans-serif; background: var(--ivory); color: var(--charcoal); min-height: 100vh; }

/* â”€â”€ NAV â”€â”€ */
.nav {
  position: sticky; top: 0; z-index: 500;
  background: rgba(250,247,242,0.97); backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(201,169,110,0.25);
  height: 58px; padding: 0 28px;
  display: flex; align-items: center; justify-content: space-between;
}
.nav-logo { font-family:'Noto Serif SC',serif; font-size:20px; font-weight:600; color:var(--gold-dark); letter-spacing:4px; cursor:pointer; user-select:none; }
.nav-links { display:flex; gap:2px; }
.nav-btn { padding:6px 14px; font-size:13px; font-family:inherit; border:none; background:transparent; color:var(--muted); cursor:pointer; border-radius:3px; transition:all .2s; white-space:nowrap; }
.nav-btn:hover { color:var(--gold-dark); background:rgba(201,169,110,.1); }
.nav-btn.active { background:var(--charcoal); color:var(--ivory); }

/* â”€â”€ PAGES â”€â”€ */
.page { display:none; }
.page.active { display:block; animation:fadeIn .3s ease; }
@keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

/* â”€â”€ BUTTONS â”€â”€ */
.btn-primary { background:var(--gold-dark); color:white; padding:11px 26px; border:none; font-size:13px; font-family:inherit; cursor:pointer; border-radius:2px; transition:all .3s; }
.btn-primary:hover { background:var(--charcoal); transform:translateY(-1px); box-shadow:0 6px 18px rgba(44,38,32,.2); }
.btn-outline { background:transparent; color:var(--charcoal); padding:11px 26px; border:1px solid var(--charcoal); font-size:13px; font-family:inherit; cursor:pointer; border-radius:2px; transition:all .3s; }
.btn-outline:hover { border-color:var(--gold-dark); color:var(--gold-dark); }
.btn-red { background:var(--red); color:white; padding:11px 26px; border:none; font-size:13px; font-family:inherit; cursor:pointer; border-radius:2px; transition:all .3s; }
.btn-red:hover { background:#a93226; }
.btn-green { background:var(--green); color:white; padding:11px 26px; border:none; font-size:13px; font-family:inherit; cursor:pointer; border-radius:2px; transition:all .3s; }
.btn-green:hover { background:#1e8449; }

/* â”€â”€ GOLD DIVIDER â”€â”€ */
.gold-divider { height:1px; background:linear-gradient(90deg,transparent,var(--gold),transparent); margin:0 28px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero { max-width:1060px; margin:0 auto; padding:52px 28px 44px; display:grid; grid-template-columns:1fr 1fr; gap:48px; align-items:center; }
.hero-tag { font-size:11px; letter-spacing:3px; color:var(--gold); margin-bottom:16px; display:flex; align-items:center; gap:10px; }
.hero-tag::before { content:''; width:24px; height:1px; background:var(--gold); display:block; }
.hero-title { font-family:'Noto Serif SC',serif; font-size:44px; font-weight:300; line-height:1.3; margin-bottom:20px; }
.hero-title em { font-style:italic; color:var(--gold-dark); }
.hero-sub { font-size:14px; line-height:1.95; color:var(--muted); margin-bottom:32px; font-weight:300; }
.hero-btns { display:flex; gap:12px; flex-wrap:wrap; }
.hero-right { display:flex; justify-content:center; position:relative; }
.mock-phone { width:220px; height:440px; background:var(--charcoal); border-radius:36px; box-shadow:0 32px 64px rgba(44,38,32,.25),0 0 0 2px rgba(201,169,110,.3); overflow:hidden; animation:phoneFloat 5s ease-in-out infinite; position:relative; }
@keyframes phoneFloat { 0%,100%{transform:translateY(0) rotate(-2deg)} 50%{transform:translateY(-12px) rotate(-2deg)} }
.phone-stream-area { height:360px; background:linear-gradient(180deg,#1a1410,#2c2620); position:relative; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.phone-glow { position:absolute; inset:0; background:radial-gradient(ellipse at center,rgba(201,169,110,.12),transparent 70%); animation:glowPulse 3s ease-in-out infinite; }
@keyframes glowPulse { 0%,100%{opacity:.5} 50%{opacity:1} }
.phone-center-icon { font-size:44px; opacity:.45; position:relative; z-index:1; }
.phone-live-badge { position:absolute; top:10px; left:10px; background:var(--red); color:white; font-size:9px; padding:3px 8px; border-radius:2px; display:flex; align-items:center; gap:4px; z-index:2; }
.blink-dot { width:5px; height:5px; background:white; border-radius:50%; animation:blink 1.2s infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.2} }
.phone-viewer { position:absolute; top:10px; right:10px; font-size:9px; color:rgba(255,255,255,.6); z-index:2; }
.phone-couple-info { position:absolute; bottom:12px; left:12px; z-index:2; }
.phone-couple-name { font-family:'Noto Serif SC',serif; font-size:15px; color:white; font-style:italic; }
.phone-couple-sub { font-size:8px; letter-spacing:1px; color:var(--gold-light); margin-top:2px; }
.phone-floating { position:absolute; right:10px; bottom:40px; z-index:2; display:flex; flex-direction:column; gap:4px; }
.float-emoji { font-size:18px; animation:emojiRise 3s ease-out infinite; opacity:0; }
.float-emoji:nth-child(2){animation-delay:1s} .float-emoji:nth-child(3){animation-delay:2s}
@keyframes emojiRise { 0%{opacity:0;transform:translateY(0)} 20%{opacity:1} 100%{opacity:0;transform:translateY(-50px)} }
.phone-bottom-bar { height:80px; background:var(--charcoal); padding:12px 14px; border-top:1px solid rgba(255,255,255,.05); }
.phone-input-mock { background:rgba(255,255,255,.07); border-radius:16px; padding:7px 12px; font-size:9px; color:rgba(255,255,255,.35); }

/* feature cards */
.features-section { background:var(--cream); padding:56px 28px; }
.section-header { text-align:center; max-width:600px; margin:0 auto 44px; }
.section-tag-c { font-size:10px; letter-spacing:3px; color:var(--gold); margin-bottom:12px; }
.section-title { font-family:'Noto Serif SC',serif; font-size:30px; font-weight:300; color:var(--charcoal); line-height:1.35; }
.section-title em { font-style:italic; color:var(--gold-dark); }
.features-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:2px; max-width:1060px; margin:0 auto; }
.feature-card { background:var(--ivory); padding:32px 26px; transition:all .35s; position:relative; overflow:hidden; }
.feature-card::after { content:''; position:absolute; bottom:0; left:0; width:0; height:2px; background:var(--gold); transition:width .35s; }
.feature-card:hover { background:white; transform:translateY(-3px); box-shadow:0 8px 24px rgba(44,38,32,.08); }
.feature-card:hover::after { width:100%; }
.feature-num { font-family:'Noto Serif SC',serif; font-size:48px; font-weight:300; color:var(--gold-light); line-height:1; margin-bottom:10px; }
.feature-title { font-family:'Noto Serif SC',serif; font-size:17px; color:var(--charcoal); margin-bottom:9px; }
.feature-desc { font-size:12px; line-height:1.85; color:var(--muted); font-weight:300; }
.feature-badge { display:inline-block; margin-top:12px; font-size:9px; letter-spacing:2px; color:var(--gold-dark); border:1px solid var(--gold-light); padding:3px 8px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIVE STREAM PAGE  (with themes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stream-page { display:grid; grid-template-columns:1fr 330px; gap:20px; padding:24px 28px; max-width:1240px; margin:0 auto; }
.stream-main { display:flex; flex-direction:column; gap:14px; }

/* VIDEO BOX â€” theme layers */
.stream-video-box {
  border-radius:6px; aspect-ratio:16/9; position:relative; overflow:hidden;
  display:flex; align-items:center; justify-content:center;
  transition:all .5s;
}
/* Default theme */
.theme-default .stream-video-box { background:var(--charcoal); }
/* ä¸­å¼çº¢ */
.theme-chinese { --theme-bg:#8b1a1a; --theme-accent:#f5c518; }
.theme-chinese .stream-video-box { background:radial-gradient(ellipse at 30% 30%,#b22222,#6b0000); }
.theme-chinese .stream-video-box::before { content:'ğŸ®ğŸ§§ğŸ®'; position:absolute; top:10px; left:0; right:0; text-align:center; font-size:28px; z-index:1; letter-spacing:16px; opacity:.7; }
.theme-chinese .stream-video-box::after { content:'å›'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) rotate(-10deg); font-size:180px; color:rgba(255,215,0,.08); font-family:'Noto Serif SC',serif; z-index:0; }
/* ç²‰è‰²æµªæ¼« */
.theme-pink .stream-video-box { background:radial-gradient(ellipse at 40% 40%,#e8b4b8,#c47a7e); }
.theme-pink .stream-video-box::before { content:'ğŸŒ¸ğŸ’—ğŸŒ¸'; position:absolute; top:8px; left:0; right:0; text-align:center; font-size:24px; z-index:1; letter-spacing:20px; opacity:.8; }
.theme-pink .stream-video-box::after { content:'â™¡'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:200px; color:rgba(255,255,255,.1); z-index:0; }
/* é‡‘è‰²å…¸é›… */
.theme-gold .stream-video-box { background:linear-gradient(135deg,#2c2620,#4a3728,#2c2620); }
.theme-gold .stream-video-box::before { content:'âœ¦'; position:absolute; top:12px; right:16px; font-size:28px; color:rgba(201,169,110,.5); z-index:1; }
.theme-gold .stream-video-box::after { content:''; position:absolute; inset:0; background:repeating-linear-gradient(45deg,transparent,transparent 30px,rgba(201,169,110,.03) 30px,rgba(201,169,110,.03) 31px); z-index:0; }
/* ç™½è‰²ç®€çº¦ */
.theme-white .stream-video-box { background:linear-gradient(135deg,#f0ebe4,#e8e0d8); }
.theme-white .stream-video-box::before { content:'ğŸ’’'; position:absolute; top:14px; left:50%; transform:translateX(-50%); font-size:32px; z-index:1; opacity:.6; }

.stream-waiting { text-align:center; position:relative; z-index:2; padding:20px; }
.stream-waiting-icon { font-size:52px; margin-bottom:10px; opacity:.5; }
.stream-waiting-text { font-family:'Noto Serif SC',serif; font-size:18px; font-style:italic; color:rgba(255,255,255,.6); margin-bottom:5px; }
.theme-white .stream-waiting-text { color:rgba(44,38,32,.5); }
.theme-pink .stream-waiting-text { color:rgba(255,255,255,.8); }
.stream-waiting-sub { font-size:11px; letter-spacing:1.5px; color:rgba(255,255,255,.25); }
.theme-white .stream-waiting-sub { color:rgba(44,38,32,.3); }

.stream-bar { position:absolute; bottom:0; left:0; right:0; padding:14px 18px; background:linear-gradient(transparent,rgba(0,0,0,.65)); display:flex; align-items:center; gap:8px; z-index:3; }
.ctrl-btn { background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18); color:white; width:34px; height:34px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:13px; transition:all .25s; flex-shrink:0; }
.ctrl-btn:hover { background:rgba(255,255,255,.25); }
.go-live-btn { margin-left:auto; background:var(--red) !important; border-color:var(--red) !important; width:auto !important; border-radius:3px !important; padding:0 16px; font-size:11px; letter-spacing:1.5px; font-family:inherit; height:34px; }
.go-live-btn:hover { background:#a93226 !important; transform:none !important; }
.live-indicator { display:flex; align-items:center; gap:5px; font-size:11px; color:rgba(255,255,255,.7); }
.live-indicator .dot { width:7px; height:7px; border-radius:50%; background:var(--red); animation:blink 1.2s infinite; }

/* THEME PICKER */
.theme-picker { background:var(--cream); border-radius:4px; padding:16px 20px; }
.theme-picker-title { font-size:12px; letter-spacing:1.5px; color:var(--muted); margin-bottom:12px; text-transform:uppercase; }
.theme-options { display:flex; gap:8px; flex-wrap:wrap; }
.theme-opt {
  padding:8px 14px; border:1px solid rgba(201,169,110,.3); background:white;
  font-size:12px; cursor:pointer; border-radius:3px; transition:all .25s;
  display:flex; align-items:center; gap:6px;
}
.theme-opt:hover { border-color:var(--gold); }
.theme-opt.selected { background:var(--charcoal); color:var(--ivory); border-color:var(--charcoal); }
.theme-dot { width:12px; height:12px; border-radius:50%; flex-shrink:0; }

/* rehearsal box */
.rehearsal-box { background:linear-gradient(135deg,var(--charcoal),#3a2e28); border-radius:4px; padding:18px 22px; border:1px solid rgba(201,169,110,.2); display:flex; justify-content:space-between; align-items:center; gap:14px; }
.rehearsal-title { font-family:'Noto Serif SC',serif; font-size:15px; color:var(--ivory); margin-bottom:4px; }
.rehearsal-desc { font-size:12px; color:rgba(250,247,242,.5); line-height:1.6; font-weight:300; max-width:480px; }
.rehearsal-status { display:flex; align-items:center; gap:6px; font-size:11px; color:#68d391; white-space:nowrap; font-weight:500; }
.status-dot-green { width:8px; height:8px; border-radius:50%; background:#68d391; flex-shrink:0; }

/* SIDEBAR */
.stream-sidebar { display:flex; flex-direction:column; gap:14px; }
.sidebar-card { background:var(--cream); border-radius:4px; padding:16px 18px; }
.sidebar-card-title { font-family:'Noto Serif SC',serif; font-size:15px; color:var(--charcoal); margin-bottom:12px; padding-bottom:9px; border-bottom:1px solid rgba(201,169,110,.2); }

.chat-msgs { max-height:160px; overflow-y:auto; display:flex; flex-direction:column; gap:7px; margin-bottom:10px; scrollbar-width:thin; scrollbar-color:var(--gold-light) transparent; }
.chat-msg-item { font-size:12px; line-height:1.55; color:var(--charcoal); }
.chat-msg-item strong { color:var(--gold-dark); font-weight:500; }
.chat-msg-item.gift-msg strong { color:var(--red); }
.chat-input-row { display:flex; gap:6px; }
.chat-input { flex:1; background:white; border:1px solid rgba(201,169,110,.3); padding:7px 10px; font-size:12px; font-family:inherit; outline:none; color:var(--charcoal); border-radius:2px; transition:border-color .25s; }
.chat-input:focus { border-color:var(--gold); }
.chat-send { background:var(--gold-dark); color:white; border:none; padding:7px 12px; font-size:12px; cursor:pointer; border-radius:2px; font-family:inherit; transition:background .25s; }
.chat-send:hover { background:var(--charcoal); }

.reactions-grid { display:flex; flex-wrap:wrap; gap:6px; }
.reaction-btn { background:white; border:1px solid rgba(201,169,110,.25); padding:6px 9px; font-size:17px; cursor:pointer; border-radius:2px; transition:all .2s; }
.reaction-btn:hover { background:var(--gold-light); transform:scale(1.2); }

.viewers-list { font-size:12px; color:var(--muted); line-height:2; }
.viewers-more { margin-top:5px; font-size:11px; letter-spacing:1px; color:var(--gold-dark); font-weight:500; }

/* floating reaction */
.float-reaction { position:fixed; font-size:26px; pointer-events:none; z-index:9999; animation:floatUp 1.6s ease-out forwards; }
@keyframes floatUp { 0%{opacity:1;transform:translateY(0) scale(1)} 100%{opacity:0;transform:translateY(-110px) scale(1.3)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GIFT / RED PACKET PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gift-page { max-width:900px; margin:0 auto; padding:44px 28px; }
.page-title { font-family:'Noto Serif SC',serif; font-size:32px; font-weight:300; color:var(--charcoal); margin-bottom:8px; }
.page-title em { font-style:italic; color:var(--red); }
.page-sub { font-size:13px; color:var(--muted); margin-bottom:36px; line-height:1.8; font-weight:300; }

/* preset packets */
.packets-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:32px; }
.packet-card {
  background:linear-gradient(145deg,#c0392b,#922b21);
  border-radius:12px; padding:20px 14px; text-align:center;
  cursor:pointer; transition:all .3s; position:relative; overflow:hidden;
  box-shadow:0 6px 20px rgba(192,57,43,.3);
  border:2px solid transparent;
}
.packet-card::before { content:''; position:absolute; inset:0; background:radial-gradient(ellipse at 30% 20%,rgba(255,255,255,.12),transparent 60%); pointer-events:none; }
.packet-card:hover { transform:translateY(-4px) scale(1.02); box-shadow:0 12px 28px rgba(192,57,43,.4); }
.packet-card.selected { border-color:var(--gold); box-shadow:0 0 0 3px rgba(201,169,110,.3); }
.packet-emoji { font-size:28px; margin-bottom:6px; position:relative; z-index:1; }
.packet-name { font-family:'Noto Serif SC',serif; font-size:14px; color:rgba(255,255,255,.95); margin-bottom:4px; position:relative; z-index:1; font-weight:400; }
.packet-amount { font-size:20px; font-weight:600; color:#ffd700; position:relative; z-index:1; font-family:'Noto Serif SC',serif; }
.packet-amount span { font-size:12px; font-weight:300; color:rgba(255,215,0,.7); }
.packet-blessing { font-size:10px; color:rgba(255,255,255,.55); margin-top:3px; letter-spacing:.5px; position:relative; z-index:1; }

/* custom amount */
.custom-section { background:var(--cream); border-radius:6px; padding:26px 28px; margin-bottom:28px; }
.custom-title { font-family:'Noto Serif SC',serif; font-size:18px; color:var(--charcoal); margin-bottom:16px; }
.custom-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
.form-label { font-size:11px; letter-spacing:1.5px; color:var(--muted); text-transform:uppercase; }
.form-input, .form-textarea {
  background:white; border:1px solid rgba(201,169,110,.3); padding:10px 13px;
  font-family:inherit; font-size:14px; color:var(--charcoal); outline:none;
  transition:border-color .3s; border-radius:2px; -webkit-appearance:none;
}
.form-input:focus,.form-textarea:focus { border-color:var(--gold); }
.form-input::placeholder,.form-textarea::placeholder { color:#c5b8ac; }
.form-textarea { resize:vertical; min-height:80px; }
.custom-full { grid-column:1/-1; }

/* send gift summary */
.gift-summary {
  background:linear-gradient(135deg,#922b21,#6b0000);
  border-radius:6px; padding:22px 26px; display:flex;
  justify-content:space-between; align-items:center; gap:16px;
  border:1px solid rgba(255,215,0,.2);
}
.gift-summary-left {}
.gift-summary-title { font-family:'Noto Serif SC',serif; font-size:18px; color:rgba(255,255,255,.9); margin-bottom:4px; }
.gift-summary-amount { font-size:32px; font-weight:600; color:#ffd700; font-family:'Noto Serif SC',serif; }
.gift-summary-name { font-size:12px; color:rgba(255,255,255,.5); margin-top:4px; }
.send-gift-btn {
  background:linear-gradient(135deg,#f5c518,#c9a000);
  color:#6b0000; border:none; padding:14px 32px;
  font-size:15px; font-weight:600; font-family:'Noto Serif SC',serif;
  cursor:pointer; border-radius:4px; transition:all .3s;
  flex-shrink:0; box-shadow:0 4px 14px rgba(245,197,24,.4);
}
.send-gift-btn:hover { transform:scale(1.04); box-shadow:0 6px 20px rgba(245,197,24,.5); }

/* gift history */
.gift-history { margin-top:32px; }
.history-title { font-family:'Noto Serif SC',serif; font-size:18px; color:var(--charcoal); margin-bottom:16px; }
.gift-item { background:var(--cream); border-radius:4px; padding:14px 18px; display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; transition:background .25s; }
.gift-item:hover { background:white; }
.gift-item-left { display:flex; align-items:center; gap:12px; }
.gift-item-emoji { font-size:24px; }
.gift-item-info {}
.gift-item-sender { font-size:14px; font-weight:500; color:var(--charcoal); }
.gift-item-name { font-size:11px; color:var(--muted); margin-top:2px; }
.gift-item-right { text-align:right; }
.gift-item-amount { font-family:'Noto Serif SC',serif; font-size:20px; color:var(--red); font-weight:600; }
.gift-item-time { font-size:10px; color:var(--muted); margin-top:2px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MESSAGES PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.messages-page { max-width:900px; margin:0 auto; padding:44px 28px; }

.message-input-section { background:var(--cream); border-radius:6px; padding:26px 28px; margin-bottom:28px; }
.msg-form-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.msg-form-full { grid-column:1/-1; }
.mood-picker { display:flex; gap:8px; flex-wrap:wrap; }
.mood-btn { background:white; border:1px solid rgba(201,169,110,.25); padding:7px 12px; font-size:16px; cursor:pointer; border-radius:20px; transition:all .2s; font-family:inherit; }
.mood-btn:hover,.mood-btn.selected { background:var(--gold-light); border-color:var(--gold); transform:scale(1.1); }
.char-count { font-size:11px; color:var(--muted); text-align:right; margin-top:4px; }
.submit-msg-btn { background:var(--charcoal); color:white; padding:12px 28px; border:none; font-size:13px; font-family:inherit; cursor:pointer; border-radius:2px; transition:all .3s; }
.submit-msg-btn:hover { background:var(--gold-dark); }

/* filter tabs */
.filter-tabs { display:flex; gap:4px; margin-bottom:20px; background:var(--cream); border-radius:4px; padding:4px; }
.filter-tab { flex:1; padding:8px; font-size:12px; font-family:inherit; border:none; background:transparent; cursor:pointer; border-radius:3px; color:var(--muted); transition:all .25s; }
.filter-tab.active { background:white; color:var(--charcoal); box-shadow:0 1px 4px rgba(44,38,32,.08); font-weight:500; }

/* message wall */
.messages-wall { display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }
.message-card {
  background:white; border-radius:6px; padding:18px 20px;
  border:1px solid rgba(201,169,110,.15); transition:all .3s;
  position:relative; overflow:hidden;
}
.message-card::before { content:''; position:absolute; top:0; left:0; width:3px; height:100%; background:var(--gold); }
.message-card:hover { box-shadow:0 6px 20px rgba(44,38,32,.08); transform:translateY(-2px); }
.message-card.from-family::before { background:var(--red); }
.message-card.from-friend::before { background:#3498db; }
.message-card.from-colleague::before { background:var(--green); }
.msg-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:10px; }
.msg-sender-name { font-weight:500; font-size:14px; color:var(--charcoal); }
.msg-relation { font-size:10px; color:var(--muted); margin-top:2px; }
.msg-mood { font-size:20px; }
.msg-text { font-size:13px; line-height:1.8; color:var(--charcoal); margin-bottom:10px; font-weight:300; }
.msg-footer { display:flex; justify-content:space-between; align-items:center; }
.msg-time { font-size:10px; color:var(--muted); }
.msg-heart-btn { background:none; border:none; cursor:pointer; font-size:14px; padding:3px 6px; border-radius:10px; transition:all .2s; color:var(--muted); }
.msg-heart-btn:hover,.msg-heart-btn.liked { color:var(--red); transform:scale(1.2); }
.msg-heart-count { font-size:11px; color:var(--muted); }

/* couple-view banner */
.couple-view-banner {
  background:linear-gradient(135deg,var(--charcoal),#3a2e28);
  border-radius:6px; padding:18px 22px; margin-bottom:24px;
  display:flex; align-items:center; gap:14px;
  border:1px solid rgba(201,169,110,.2);
}
.couple-view-icon { font-size:32px; }
.couple-view-text { flex:1; }
.couple-view-title { font-family:'Noto Serif SC',serif; font-size:16px; color:var(--ivory); margin-bottom:3px; }
.couple-view-sub { font-size:12px; color:rgba(250,247,242,.5); }
.couple-view-btn { background:var(--gold-dark); color:white; border:none; padding:8px 18px; font-size:12px; font-family:inherit; cursor:pointer; border-radius:2px; transition:background .25s; white-space:nowrap; }
.couple-view-btn:hover { background:#7a5c30; }

/* stats bar */
.msg-stats { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-bottom:24px; }
.msg-stat { background:var(--cream); border-radius:4px; padding:14px; text-align:center; }
.msg-stat-val { font-family:'Noto Serif SC',serif; font-size:28px; font-weight:300; color:var(--charcoal); }
.msg-stat-val.red { color:var(--red); }
.msg-stat-val.gold { color:var(--gold-dark); }
.msg-stat-label { font-size:10px; letter-spacing:1.5px; color:var(--muted); margin-top:4px; text-transform:uppercase; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:900px){
  .hero { grid-template-columns:1fr; }
  .hero-right { display:none; }
  .features-grid { grid-template-columns:1fr 1fr; }
  .stream-page { grid-template-columns:1fr; }
  .packets-grid { grid-template-columns:repeat(2,1fr); }
  .custom-grid { grid-template-columns:1fr; }
  .messages-wall { grid-template-columns:1fr; }
  .msg-stats { grid-template-columns:repeat(2,1fr); }
  .msg-form-grid { grid-template-columns:1fr; }
  .gift-summary { flex-direction:column; align-items:flex-start; }
  .rehearsal-box { flex-direction:column; align-items:flex-start; }
}
@media(max-width:600px){
  .nav { padding:0 14px; }
  .nav-logo { font-size:16px; letter-spacing:2px; }
  .nav-btn { padding:5px 9px; font-size:11px; }
  .hero,.gift-page,.messages-page,.features-section { padding-left:14px; padding-right:14px; }
  .stream-page { padding:12px 14px; }
  .gold-divider { margin:0 14px; }
  .packets-grid { grid-template-columns:1fr 1fr; gap:10px; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav-logo" onclick="showPage('home')">å› VOW</div>
  <div class="nav-links">
    <button class="nav-btn active" onclick="showPage('home')">é¦–é¡µ</button>
    <button class="nav-btn" onclick="showPage('stream')">ç›´æ’­ç°åœº</button>
    <button class="nav-btn" onclick="showPage('gift')">é€ç¤¼ç‰© ğŸ§§</button>
    <button class="nav-btn" onclick="showPage('messages')">ç¥ç¦ç•™è¨€ ğŸ’Œ</button>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-home" class="page active">
  <div class="hero">
    <div>
      <div class="hero-tag">å©šç¤¼ç›´æ’­å¹³å°</div>
      <h1 class="hero-title">ä½ çš„èª“è¨€ï¼Œ<br/>è®©æ‰€æœ‰äºº<em>è§è¯</em>ã€‚</h1>
      <p class="hero-sub">ä¸ºæ— æ³•åˆ°åœºçš„äº²å‹æä¾›æ¸…æ™°ã€ç¨³å®šçš„å©šç¤¼ç›´æ’­ä½“éªŒã€‚é€å‡ºå¿ƒæ„ï¼Œç•™ä¸‹ç¥ç¦ï¼Œæ— è®ºèº«åœ¨ä½•å¤„ï¼Œéƒ½åƒäº²ä¸´ç°åœºã€‚</p>
      <div class="hero-btns">
        <button class="btn-primary" onclick="showPage('stream')">è¿›å…¥ç›´æ’­é—´</button>
        <button class="btn-outline" onclick="showPage('gift')">é€å‡ºå¿ƒæ„ ğŸ§§</button>
      </div>
    </div>
    <div class="hero-right">
      <div class="mock-phone">
        <div class="phone-stream-area">
          <div class="phone-glow"></div>
          <div class="phone-live-badge"><div class="blink-dot"></div>ç›´æ’­ä¸­</div>
          <div class="phone-viewer">ğŸ‘ 247 äººè§‚çœ‹</div>
          <div class="phone-center-icon">ğŸ’</div>
          <div class="phone-couple-info">
            <div class="phone-couple-name">æå©· &amp; ç‹ç£Š</div>
            <div class="phone-couple-sub">6æœˆ14æ—¥ Â· èŠ±å›­å©šç¤¼</div>
          </div>
          <div class="phone-floating">
            <div class="float-emoji">â¤ï¸</div>
            <div class="float-emoji">ğŸ§§</div>
            <div class="float-emoji">ğŸ’</div>
          </div>
        </div>
        <div class="phone-bottom-bar">
          <div class="phone-input-mock">é€ä¸Šç¥ç¦...</div>
        </div>
      </div>
    </div>
  </div>

  <div class="gold-divider"></div>

  <div class="features-section">
    <div class="section-header">
      <div class="section-tag-c">æ ¸å¿ƒåŠŸèƒ½</div>
      <div class="section-title">ä¸º<em>æœ€é‡è¦çš„ä¸€å¤©</em>è€Œç”Ÿ</div>
    </div>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-num">01</div>
        <div class="feature-title">ç¨³å®šç›´æ’­ + ä¸»é¢˜è£…é¥°</div>
        <div class="feature-desc">è‡ªé€‚åº”ç”»è´¨ï¼Œå½©æ’å¤‡ä»½ï¼Œä»¥åŠå¤šç§å¯åˆ‡æ¢çš„ç›´æ’­é—´è£…é¥°ä¸»é¢˜ï¼Œè®©è¿œç«¯å®¾å®¢èº«ä¸´å…¶å¢ƒã€‚</div>
        <div class="feature-badge">å®æ—¶ç›´æ’­</div>
      </div>
      <div class="feature-card">
        <div class="feature-num">02</div>
        <div class="feature-title">çº¿ä¸Šé€ç¤¼ Â· è¿˜æƒ…çº¢åŒ…</div>
        <div class="feature-desc">ç²¾é€‰å‰åˆ©é‡‘é¢çº¢åŒ…ï¼Œåå­—æœ‰è¶£åˆåº”æ™¯ã€‚æ”¯æŒè‡ªå®šä¹‰æ•°é¢å’Œä¸“å±ç¥ç¦è¯­ï¼Œå®Œç¾å»¶ç»­ä¸­å›½"è¿˜æƒ…"æ–‡åŒ–ã€‚</div>
        <div class="feature-badge">åˆ›æ„åŠŸèƒ½ âœ¦</div>
      </div>
      <div class="feature-card">
        <div class="feature-num">03</div>
        <div class="feature-title">ç¥ç¦ç•™è¨€å¢™</div>
        <div class="feature-desc">å®¾å®¢ç•™ä¸‹æ–‡å­—å’Œè¡¨æƒ…ç¥ç¦ï¼Œæ–°äººå©šåå¯ä»¥æ…¢æ…¢å›çœ‹æ¯ä¸€æ¡å¿ƒæ„ï¼Œæ¸©æš–ä¸€ç”Ÿçè—ã€‚</div>
        <div class="feature-badge">æ°¸ä¹…ç•™å­˜</div>
      </div>
      <div class="feature-card">
        <div class="feature-num">04</div>
        <div class="feature-title">ç§å¯†é‚€è¯·</div>
        <div class="feature-desc">ä¸“å±é“¾æ¥åˆ†äº«ï¼Œæ— éœ€ä¸‹è½½ Appï¼Œå®¾å®¢ç›´æ¥åœ¨æ‰‹æœºæµè§ˆå™¨ç‚¹å¼€å³å¯â€”â€”è€äººå°å­©éƒ½èƒ½ç”¨ã€‚</div>
        <div class="feature-badge">é›¶é—¨æ§›</div>
      </div>
      <div class="feature-card">
        <div class="feature-num">05</div>
        <div class="feature-title">å®æ—¶äº’åŠ¨</div>
        <div class="feature-desc">å‘é€è¡¨æƒ…ã€èŠå¤©ç¥ç¦ï¼Œç›´æ’­é—´å®æ—¶å±•ç¤ºå®¾å®¢äº’åŠ¨ï¼ŒåƒçœŸçš„ååœ¨åº§ä½ä¸Šä¸€æ ·çƒ­é—¹ã€‚</div>
        <div class="feature-badge">å®æ—¶äº’åŠ¨</div>
      </div>
      <div class="feature-card">
        <div class="feature-num">06</div>
        <div class="feature-title">é«˜æ¸…å­˜æ¡£</div>
        <div class="feature-desc">å©šç¤¼å…¨ç¨‹è‡ªåŠ¨ä¿å­˜é«˜æ¸…å›æ”¾ï¼Œæ–°äººå¯éšæ—¶é‡æ¸©ï¼Œä¹Ÿå¯ä¸‹è½½æˆ–åˆ†äº«ç»™å…¨å®¶çè—ã€‚</div>
        <div class="feature-badge">æ°¸ä¹…ä¿å­˜</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LIVE STREAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-stream" class="page">
  <div id="stream-wrapper" class="theme-default">
    <div class="stream-page">
      <div class="stream-main">

        <!-- Theme Picker -->
        <div class="theme-picker">
          <div class="theme-picker-title">ğŸ¨ ç›´æ’­é—´ä¸»é¢˜è£…é¥°</div>
          <div class="theme-options">
            <div class="theme-opt selected" onclick="setTheme('default',this)">
              <div class="theme-dot" style="background:#2c2620"></div>æ·±å¤œé»˜ç‰‡
            </div>
            <div class="theme-opt" onclick="setTheme('chinese',this)">
              <div class="theme-dot" style="background:#8b1a1a"></div>ğŸ® ä¸­å¼çº¢å–œ
            </div>
            <div class="theme-opt" onclick="setTheme('pink',this)">
              <div class="theme-dot" style="background:#e8b4b8"></div>ğŸŒ¸ ç²‰è‰²æµªæ¼«
            </div>
            <div class="theme-opt" onclick="setTheme('gold',this)">
              <div class="theme-dot" style="background:#c9a96e"></div>âœ¦ é‡‘è‰²å…¸é›…
            </div>
            <div class="theme-opt" onclick="setTheme('white',this)">
              <div class="theme-dot" style="background:#e8e0d8;border:1px solid #ccc"></div>ğŸ¤ ç™½è‰²ç®€çº¦
            </div>
          </div>
        </div>

        <!-- Camera permission notice -->
        <div id="cam-notice" style="background:rgba(201,169,110,0.12);border:1px solid rgba(201,169,110,0.35);border-radius:4px;padding:12px 16px;display:flex;align-items:center;gap:10px;font-size:12px;color:var(--charcoal);margin-bottom:0;">
          <span style="font-size:18px">ğŸ“·</span>
          <span>ç‚¹å‡»ã€Œå¼€å§‹ç›´æ’­ã€åï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºæ‘„åƒå¤´æˆæƒè¯·æ±‚ï¼Œè¯·ç‚¹å‡»<b>ã€Œå…è®¸ã€</b>å³å¯æ¥å…¥ä½ çš„æ‘„åƒå¤´ã€‚</span>
        </div>

        <!-- Video -->
        <div class="stream-video-box" id="stream-video-box">
          <!-- Real camera feed -->
          <video id="camera-video" autoplay playsinline muted
            style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none;z-index:1;border-radius:6px;transform:scaleX(-1);">
          </video>

          <!-- Overlay decorations on top of video (theme-specific) -->
          <div id="theme-overlay" style="position:absolute;inset:0;pointer-events:none;z-index:2;"></div>

          <!-- Waiting screen (shown before camera starts) -->
          <div class="stream-waiting" id="stream-waiting" style="position:relative;z-index:3;">
            <div class="stream-waiting-icon">ğŸ’</div>
            <div class="stream-waiting-text">ç­‰å¾…å…¸ç¤¼å¼€å§‹</div>
            <div class="stream-waiting-sub" id="countdown-text">ç‚¹å‡»ã€Œå¼€å§‹ç›´æ’­ã€æ¥å…¥æ‘„åƒå¤´</div>
          </div>

          <!-- LIVE badge on top of video -->
          <div id="live-badge-overlay" style="display:none;position:absolute;top:14px;left:14px;z-index:4;background:var(--red);color:white;font-size:10px;padding:4px 10px;border-radius:2px;display:none;align-items:center;gap:5px;">
            <div style="width:6px;height:6px;border-radius:50%;background:white;animation:blink 1.2s infinite;"></div>ç›´æ’­ä¸­
          </div>

          <!-- Couple name overlay -->
          <div id="couple-overlay" style="display:none;position:absolute;bottom:56px;left:14px;z-index:4;background:rgba(0,0,0,0.45);backdrop-filter:blur(4px);padding:8px 14px;border-radius:3px;">
            <div style="font-family:'Noto Serif SC',serif;font-size:15px;color:white;font-style:italic;">æå©· &amp; ç‹ç£Š</div>
            <div style="font-size:9px;letter-spacing:1.5px;color:var(--gold-light);margin-top:2px;">6æœˆ14æ—¥ Â· èŠ±å›­å©šç¤¼</div>
          </div>

          <!-- Viewer count overlay -->
          <div id="viewer-overlay" style="display:none;position:absolute;top:14px;right:14px;z-index:4;background:rgba(0,0,0,0.4);backdrop-filter:blur(4px);padding:4px 10px;border-radius:2px;font-size:11px;color:rgba(255,255,255,0.8);">
            ğŸ‘ 247 äººè§‚çœ‹
          </div>

          <!-- Error message -->
          <div id="cam-error" style="display:none;position:relative;z-index:3;text-align:center;padding:20px;">
            <div style="font-size:40px;margin-bottom:10px;">ğŸ“µ</div>
            <div style="font-family:'Noto Serif SC',serif;font-size:16px;color:rgba(255,255,255,0.7);margin-bottom:6px;">æ— æ³•è®¿é—®æ‘„åƒå¤´</div>
            <div style="font-size:11px;color:rgba(255,255,255,0.4);line-height:1.7;" id="cam-error-msg">è¯·æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®</div>
          </div>

          <div class="stream-bar">
            <button class="ctrl-btn" id="mute-btn" onclick="toggleMute()" title="éº¦å…‹é£">ğŸ™ï¸</button>
            <button class="ctrl-btn" id="cam-btn" onclick="toggleCamera()" title="æ‘„åƒå¤´">ğŸ“·</button>
            <button class="ctrl-btn" onclick="toggleFullscreen()" title="å…¨å±">â›¶</button>
            <button class="ctrl-btn" id="mirror-btn" onclick="toggleMirror()" title="é•œåƒç¿»è½¬" style="font-size:11px;width:auto;border-radius:3px;padding:0 10px;">é•œåƒ</button>
            <div class="live-indicator" id="live-ind" style="display:none"><div class="dot"></div><span>ç›´æ’­ä¸­</span></div>
            <button class="ctrl-btn go-live-btn" id="go-live-btn" onclick="toggleLive()">â— å¼€å§‹ç›´æ’­</button>
          </div>
        </div>

        <!-- Rehearsal backup -->
        <div class="rehearsal-box">
          <div>
            <div class="rehearsal-title">å½©æ’å¤‡ä»½å·²å°±ç»ª</div>
            <div class="rehearsal-desc">æ˜¨æ—¥å½©æ’å½•åƒå·²ä¿å­˜ã€‚è‹¥ç›´æ’­å‡ºç°ä¸­æ–­ï¼Œå¯æ— ç¼åˆ‡æ¢è‡³å¤‡ç”¨è§†é¢‘ï¼Œç¡®ä¿å®¾å®¢ä¸é”™è¿‡ä»»ä½•å…³é”®æ—¶åˆ»ã€‚</div>
          </div>
          <div class="rehearsal-status"><div class="status-dot-green"></div>å¤‡ç”¨å°±ç»ª Â· 01:24:07</div>
        </div>
      </div>

      <!-- SIDEBAR -->
      <div class="stream-sidebar">
        <div class="sidebar-card">
          <div class="sidebar-card-title">ç›´æ’­ç¥ç¦ ğŸ’¬</div>
          <div class="chat-msgs" id="chat-msgs">
            <div class="chat-msg-item"><strong>é˜¿å§¨ï¼ˆä¸œäº¬ï¼‰</strong> éš”ç€å±å¹•æ„ŸåŠ¨è½æ³ª ğŸ¥º</div>
            <div class="chat-msg-item"><strong>ç‹å®¶å…¨ä½“</strong> æ¨ä¸å¾—é£è¿‡æ¥ ğŸ¥‚</div>
            <div class="chat-msg-item gift-msg"><strong>ğŸ§§ èˆ…èˆ…</strong> é€å‡ºã€Œç™¾å¹´å¥½åˆã€Â· Â¥999</div>
            <div class="chat-msg-item"><strong>çˆ·çˆ·</strong> ä¸ºä½ ä»¬æ„Ÿåˆ°éª„å‚² ğŸ’•</div>
            <div class="chat-msg-item gift-msg"><strong>ğŸ§§ åŒå­¦ç¾¤</strong> é€å‡ºã€Œæ—©ç”Ÿè´µå­ã€Â· Â¥188</div>
          </div>
          <div class="chat-input-row">
            <input class="chat-input" id="chat-input" placeholder="é€ä¸Šä½ çš„ç¥ç¦..." onkeydown="if(event.key==='Enter')sendMsg()"/>
            <button class="chat-send" onclick="sendMsg()">å‘é€</button>
          </div>
        </div>

        <div class="sidebar-card">
          <div class="sidebar-card-title">å‘é€è¡¨æƒ… âœ¨</div>
          <div class="reactions-grid">
            <button class="reaction-btn" onclick="sendReaction('â¤ï¸',event)">â¤ï¸</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ§§',event)">ğŸ§§</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ’',event)">ğŸ’</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ˜­',event)">ğŸ˜­</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ‰',event)">ğŸ‰</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ’',event)">ğŸ’</button>
            <button class="reaction-btn" onclick="sendReaction('ğŸ¥‚',event)">ğŸ¥‚</button>
            <button class="reaction-btn" onclick="sendReaction('âœ¨',event)">âœ¨</button>
          </div>
        </div>

        <div class="sidebar-card">
          <div class="sidebar-card-title">247 äººæ­£åœ¨è§‚çœ‹</div>
          <div class="viewers-list">ğŸ‡¨ğŸ‡³ åŒ—äº¬ Â· ğŸ‡¨ğŸ‡³ ä¸Šæµ· Â· ğŸ‡¨ğŸ‡³ å¹¿å·<br/>ğŸ‡ºğŸ‡¸ çº½çº¦ Â· ğŸ‡¯ğŸ‡µ ä¸œäº¬ Â· ğŸ‡¬ğŸ‡§ ä¼¦æ•¦<br/>ğŸ‡¦ğŸ‡º æ‚‰å°¼ Â· ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡</div>
          <div class="viewers-more">+ æ¥è‡ª 10 ä¸ªå›½å®¶å’Œåœ°åŒº</div>
        </div>

        <button class="btn-red" style="width:100%" onclick="showPage('gift')">ğŸ§§ é€å‡ºç¤¼ç‰©çº¢åŒ…</button>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GIFT / RED PACKET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-gift" class="page">
  <div class="gift-page">
    <div class="page-title">é€å‡ºä½ çš„<em>å¿ƒæ„</em></div>
    <p class="page-sub">é€‰æ‹©å‰åˆ©çº¢åŒ…ï¼Œæˆ–è‡ªå®šä¹‰é‡‘é¢ä¸ç¥ç¦è¯­ã€‚é‡‘é¢å°†è®°å½•åœ¨ç¤¼è´¦æœ¬ä¸­ï¼Œæ–°äººå¯åœ¨å©šåå›çœ‹æ¯ä¸€ä»½å¿ƒæ„ã€‚</p>

    <!-- Preset packets -->
    <div class="packets-grid" id="packets-grid">
      <!-- generated by JS -->
    </div>

    <!-- Custom -->
    <div class="custom-section">
      <div class="custom-title">è‡ªå®šä¹‰çº¢åŒ…</div>
      <div class="custom-grid">
        <div class="form-group">
          <label class="form-label">ä½ çš„å§“å</label>
          <input class="form-input" id="gift-sender" placeholder="ä¾‹ï¼šå¼ ä¼Ÿå”å”"/>
        </div>
        <div class="form-group">
          <label class="form-label">è‡ªå®šä¹‰é‡‘é¢ï¼ˆå…ƒï¼‰</label>
          <input class="form-input" type="number" id="gift-custom-amount" placeholder="ä¾‹ï¼š520" min="0.99" max="99999"/>
        </div>
        <div class="form-group" style="grid-column:1/-1">
          <label class="form-label">ä¸“å±ç¥ç¦è¯­</label>
          <input class="form-input" id="gift-blessing" placeholder="ä¾‹ï¼šæ„¿ä½ ä»¬ç›¸å®ˆä¸€ç”Ÿï¼Œå²å²å¹³å®‰"/>
        </div>
      </div>
    </div>

    <!-- Summary -->
    <div class="gift-summary" id="gift-summary">
      <div class="gift-summary-left">
        <div class="gift-summary-title" id="summary-packet-name">è¯·é€‰æ‹©ä¸€ä¸ªçº¢åŒ… ğŸ‘†</div>
        <div class="gift-summary-amount" id="summary-amount">â€” <span>å…ƒ</span></div>
        <div class="gift-summary-name" id="summary-blessing">é€‰æ‹©é¢„è®¾çº¢åŒ…æˆ–å¡«å†™è‡ªå®šä¹‰é‡‘é¢</div>
      </div>
      <button class="send-gift-btn" onclick="sendGift()">ğŸ§§ é€å‡ºçº¢åŒ…</button>
    </div>

    <!-- Gift history -->
    <div class="gift-history">
      <div class="history-title">ä»Šæ—¥ç¤¼è´¦ Â· å…±æ”¶åˆ° <span id="gift-total" style="color:var(--red)">Â¥3,588</span></div>
      <div id="gift-list">
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸ§§</div><div class="gift-item-info"><div class="gift-item-sender">èˆ…èˆ…ä¸€å®¶</div><div class="gift-item-name">ç™¾å¹´å¥½åˆ</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥999</div><div class="gift-item-time">14:32</div></div>
        </div>
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸŠ</div><div class="gift-item-info"><div class="gift-item-sender">å¤§å­¦åŒå­¦ç¾¤</div><div class="gift-item-name">æ—©ç”Ÿè´µå­</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥188</div><div class="gift-item-time">14:28</div></div>
        </div>
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸ’•</div><div class="gift-item-info"><div class="gift-item-sender">å§‘å§‘ï¼ˆæ‚‰å°¼ï¼‰</div><div class="gift-item-name">èŠ±å¥½æœˆåœ†</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥520</div><div class="gift-item-time">14:15</div></div>
        </div>
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸŒ¸</div><div class="gift-item-info"><div class="gift-item-sender">å‰åŒäº‹å°æ</div><div class="gift-item-name">é‡‘ç‰æ»¡å ‚</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥188</div><div class="gift-item-time">14:09</div></div>
        </div>
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸ€</div><div class="gift-item-info"><div class="gift-item-sender">è¡¨å“¥ï¼ˆçº½çº¦ï¼‰</div><div class="gift-item-name">å¹¸ç¦ç¾æ»¡</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥666</div><div class="gift-item-time">13:58</div></div>
        </div>
        <div class="gift-item">
          <div class="gift-item-left"><div class="gift-item-emoji">ğŸ’</div><div class="gift-item-info"><div class="gift-item-sender">é—ºèœœå›¢</div><div class="gift-item-name">ç™½å¤´å•è€</div></div></div>
          <div class="gift-item-right"><div class="gift-item-amount">Â¥1,027</div><div class="gift-item-time">13:44</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MESSAGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-messages" class="page">
  <div class="messages-page">
    <div class="page-title">å©šç¤¼<em>ç¥ç¦ç•™è¨€</em></div>
    <p class="page-sub">äº²çˆ±çš„å®¾å®¢ï¼Œè¯·ç•™ä¸‹ä½ å¯¹æ–°äººæœ€çœŸè¯šçš„ç¥ç¦ã€‚å©šç¤¼ç»“æŸåï¼Œä»–ä»¬ä¼šäº²è‡ªå›æ¥ç»†ç»†å“è¯»æ¯ä¸€æ¡å¿ƒæ„ã€‚</p>

    <!-- Couple view banner -->
    <div class="couple-view-banner">
      <div class="couple-view-icon">ğŸ‘«</div>
      <div class="couple-view-text">
        <div class="couple-view-title">æ–°äººä¸“å±å›çœ‹æ¨¡å¼</div>
        <div class="couple-view-sub">å©šç¤¼ç»“æŸåï¼Œç‚¹å‡»è¿™é‡Œä»¥æ–°äººèº«ä»½æ…¢æ…¢å›å‘³æ¯ä¸€æ¡ç¥ç¦</div>
      </div>
      <button class="couple-view-btn" onclick="toggleCoupleView()">è¿›å…¥å›çœ‹æ¨¡å¼</button>
    </div>

    <!-- Stats -->
    <div class="msg-stats">
      <div class="msg-stat"><div class="msg-stat-val" id="stat-total">24</div><div class="msg-stat-label">æ¡ç¥ç¦</div></div>
      <div class="msg-stat"><div class="msg-stat-val red" id="stat-hearts">186</div><div class="msg-stat-label">ä¸ªå¿ƒæ„</div></div>
      <div class="msg-stat"><div class="msg-stat-val gold" id="stat-countries">8</div><div class="msg-stat-label">ä¸ªåŸå¸‚</div></div>
      <div class="msg-stat"><div class="msg-stat-val" id="stat-family">12</div><div class="msg-stat-label">ä½å®¶äºº</div></div>
    </div>

    <!-- Write message -->
    <div class="message-input-section" id="write-section">
      <div class="custom-title" style="margin-bottom:16px">âœï¸ å†™ä¸‹ä½ çš„ç¥ç¦</div>
      <div class="msg-form-grid">
        <div class="form-group">
          <label class="form-label">ä½ çš„åå­—</label>
          <input class="form-input" id="msg-sender" placeholder="ä¾‹ï¼šè¡¨å§ä¸€å®¶"/>
        </div>
        <div class="form-group">
          <label class="form-label">ä½ ä¸æ–°äººçš„å…³ç³»</label>
          <select class="form-input" id="msg-relation">
            <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶äºº</option>
            <option value="friend">ğŸ‘¯ æœ‹å‹</option>
            <option value="colleague">ğŸ’¼ åŒäº‹/åŒå­¦</option>
            <option value="other">ğŸŒŸ å…¶ä»–</option>
          </select>
        </div>
        <div class="form-group msg-form-full">
          <label class="form-label">ç¥ç¦è¯­</label>
          <textarea class="form-textarea" id="msg-text" placeholder="å†™ä¸‹æœ€çœŸè¯šçš„ç¥ç¦ï¼Œæ–°äººå°†åœ¨å©šåäº²è‡ªå›è¯»æ¯ä¸€æ¡..." maxlength="200" oninput="updateCharCount()"></textarea>
          <div class="char-count"><span id="char-count">0</span>/200</div>
        </div>
        <div class="form-group msg-form-full">
          <label class="form-label">å¿ƒæƒ… / è¡¨æƒ…</label>
          <div class="mood-picker" id="mood-picker">
            <button class="mood-btn selected" onclick="selectMood(this,'â¤ï¸')">â¤ï¸</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ˜­')">ğŸ˜­</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ¥‚')">ğŸ¥‚</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸŒ¸')">ğŸŒ¸</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ‰')">ğŸ‰</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ’')">ğŸ’</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ™')">ğŸ™</button>
            <button class="mood-btn" onclick="selectMood(this,'ğŸ’•')">ğŸ’•</button>
          </div>
        </div>
      </div>
      <button class="submit-msg-btn" style="margin-top:14px" onclick="submitMessage()">é€å‡ºç¥ç¦ ğŸ’Œ</button>
    </div>

    <!-- Filter -->
    <div class="filter-tabs">
      <button class="filter-tab active" onclick="filterMsgs('all',this)">å…¨éƒ¨ç¥ç¦</button>
      <button class="filter-tab" onclick="filterMsgs('family',this)">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶äºº</button>
      <button class="filter-tab" onclick="filterMsgs('friend',this)">ğŸ‘¯ æœ‹å‹</button>
      <button class="filter-tab" onclick="filterMsgs('colleague',this)">ğŸ’¼ åŒäº‹/åŒå­¦</button>
    </div>

    <!-- Message wall -->
    <div class="messages-wall" id="messages-wall">
      <!-- generated by JS -->
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€ PAGE NAV â”€â”€
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  const map = ['home','stream','gift','messages'];
  document.querySelectorAll('.nav-btn')[map.indexOf(id)].classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}

// â”€â”€ THEME â”€â”€
const THEME_OVERLAYS = {
  default: '',
  chinese: '<div style="position:absolute;top:0;left:0;right:0;padding:10px;text-align:center;font-size:26px;letter-spacing:14px;opacity:0.6;text-shadow:0 0 12px rgba(255,200,0,0.5)">ğŸ®ğŸ§§ğŸ®</div><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-8deg);font-size:160px;color:rgba(255,215,0,0.07);font-family:serif;pointer-events:none">å›</div>',
  pink: '<div style="position:absolute;top:0;left:0;right:0;padding:8px;text-align:center;font-size:22px;letter-spacing:18px;opacity:0.75">ğŸŒ¸ğŸ’—ğŸŒ¸</div><div style="position:absolute;bottom:60px;right:12px;font-size:22px;opacity:0.5;line-height:1.8">ğŸŒ¸<br>ğŸ’•<br>ğŸŒ¸</div>',
  gold: '<div style="position:absolute;top:10px;right:14px;font-size:22px;color:rgba(201,169,110,0.55);text-shadow:0 0 8px rgba(201,169,110,0.4)">âœ¦</div><div style="position:absolute;bottom:60px;left:10px;font-size:18px;color:rgba(201,169,110,0.4)">âœ¦</div>',
  white: '<div style="position:absolute;top:12px;left:50%;transform:translateX(-50%);font-size:28px;opacity:0.55">ğŸ’’</div>'
};

function setTheme(name, btn) {
  const w = document.getElementById('stream-wrapper');
  w.className = 'theme-' + name;
  document.querySelectorAll('.theme-opt').forEach(o => o.classList.remove('selected'));
  btn.classList.add('selected');
  const overlay = document.getElementById('theme-overlay');
  if (overlay) overlay.innerHTML = THEME_OVERLAYS[name] || '';
}

// â”€â”€ STREAM / CAMERA â”€â”€
let isLive = false;
let micMuted = false;
let camOff = false;
let mirrored = true;
let mediaStream = null;

async function toggleLive() {
  if (!isLive) {
    await startCamera();
  } else {
    stopCamera();
  }
}

async function startCamera() {
  const btn = document.getElementById('go-live-btn');
  btn.textContent = 'â³ è¿æ¥ä¸­...';
  btn.disabled = true;

  try {
    mediaStream = await navigator.mediaDevices.getUserMedia({
      video: { width: { ideal: 1280 }, height: { ideal: 720 }, facingMode: 'user' },
      audio: true
    });

    const video = document.getElementById('camera-video');
    video.srcObject = mediaStream;
    video.style.display = 'block';

    // Hide waiting screen, show live overlays
    document.getElementById('stream-waiting').style.display = 'none';
    document.getElementById('cam-error').style.display = 'none';
    document.getElementById('cam-notice').style.display = 'none';
    document.getElementById('live-badge-overlay').style.display = 'flex';
    document.getElementById('couple-overlay').style.display = 'block';
    document.getElementById('viewer-overlay').style.display = 'block';
    document.getElementById('live-ind').style.display = 'flex';

    btn.textContent = 'â–  ç»“æŸç›´æ’­';
    btn.style.background = '#555';
    btn.style.borderColor = '#555';
    btn.disabled = false;
    isLive = true;

    // Apply mic mute state
    mediaStream.getAudioTracks().forEach(t => t.enabled = !micMuted);

  } catch (err) {
    btn.textContent = 'â— å¼€å§‹ç›´æ’­';
    btn.style.background = '';
    btn.style.borderColor = '';
    btn.disabled = false;

    document.getElementById('stream-waiting').style.display = 'none';
    document.getElementById('cam-error').style.display = 'block';

    let msg = 'è¯·æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®ï¼Œç„¶ååˆ·æ–°é¡µé¢é‡è¯•ã€‚';
    if (err.name === 'NotAllowedError') {
      msg = 'ä½ æ‹’ç»äº†æ‘„åƒå¤´æƒé™ã€‚<br/>è¯·ç‚¹å‡»æµè§ˆå™¨åœ°å€æ å·¦ä¾§çš„ğŸ”’å›¾æ ‡ â†’ å°†æ‘„åƒå¤´å’Œéº¦å…‹é£æ”¹ä¸ºã€Œå…è®¸ã€ï¼Œç„¶ååˆ·æ–°é¡µé¢ã€‚';
    } else if (err.name === 'NotFoundError') {
      msg = 'æœªæ£€æµ‹åˆ°æ‘„åƒå¤´è®¾å¤‡ï¼Œè¯·ç¡®è®¤æ‘„åƒå¤´å·²æ­£ç¡®è¿æ¥ã€‚';
    } else if (err.name === 'NotReadableError') {
      msg = 'æ‘„åƒå¤´æ­£è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼ˆå¦‚å¾®ä¿¡ã€è…¾è®¯ä¼šè®®ï¼‰ï¼Œè¯·å…ˆå…³é—­å®ƒä»¬å†è¯•ã€‚';
    }
    document.getElementById('cam-error-msg').innerHTML = msg;
  }
}

function stopCamera() {
  if (mediaStream) {
    mediaStream.getTracks().forEach(t => t.stop());
    mediaStream = null;
  }
  const video = document.getElementById('camera-video');
  video.srcObject = null;
  video.style.display = 'none';

  document.getElementById('stream-waiting').style.display = 'block';
  document.getElementById('stream-waiting').innerHTML = '<div class="stream-waiting-icon">âœ…</div><div class="stream-waiting-text">ç›´æ’­å·²ç»“æŸ</div><div class="stream-waiting-sub">å›æ”¾è§†é¢‘å¤„ç†ä¸­...</div>';
  document.getElementById('live-badge-overlay').style.display = 'none';
  document.getElementById('couple-overlay').style.display = 'none';
  document.getElementById('viewer-overlay').style.display = 'none';
  document.getElementById('live-ind').style.display = 'none';

  const btn = document.getElementById('go-live-btn');
  btn.textContent = 'â— å¼€å§‹ç›´æ’­';
  btn.style.background = '';
  btn.style.borderColor = '';
  isLive = false;
}

function toggleMute() {
  micMuted = !micMuted;
  document.getElementById('mute-btn').textContent = micMuted ? 'ğŸ”‡' : 'ğŸ™ï¸';
  document.getElementById('mute-btn').style.background = micMuted ? 'rgba(192,57,43,0.5)' : '';
  if (mediaStream) {
    mediaStream.getAudioTracks().forEach(t => t.enabled = !micMuted);
  }
}

function toggleCamera() {
  camOff = !camOff;
  const video = document.getElementById('camera-video');
  const btn = document.getElementById('cam-btn');
  if (mediaStream) {
    mediaStream.getVideoTracks().forEach(t => t.enabled = !camOff);
  }
  video.style.opacity = camOff ? '0' : '1';
  btn.textContent = camOff ? 'ğŸš«' : 'ğŸ“·';
  btn.style.background = camOff ? 'rgba(192,57,43,0.5)' : '';
}

function toggleMirror() {
  mirrored = !mirrored;
  const video = document.getElementById('camera-video');
  video.style.transform = mirrored ? 'scaleX(-1)' : 'scaleX(1)';
  document.getElementById('mirror-btn').style.background = mirrored ? 'rgba(201,169,110,0.3)' : '';
}

function toggleFullscreen() {
  const box = document.getElementById('stream-video-box');
  if (!document.fullscreenElement) {
    box.requestFullscreen().catch(() => alert('å…¨å±è¯·æ±‚è¢«æ‹’ç»ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®'));
  } else {
    document.exitFullscreen();
  }
}

function sendMsg(){
  const inp=document.getElementById('chat-input');
  const t=inp.value.trim(); if(!t)return;
  const msgs=document.getElementById('chat-msgs');
  const d=document.createElement('div'); d.className='chat-msg-item';
  d.innerHTML='<strong>æˆ‘</strong> '+t;
  msgs.appendChild(d); msgs.scrollTop=msgs.scrollHeight; inp.value='';
}
function sendReaction(emoji,e){
  const btn=e.target; btn.style.transform='scale(1.4)'; setTimeout(()=>btn.style.transform='',300);
  const el=document.createElement('div'); el.textContent=emoji; el.className='float-reaction';
  const r=btn.getBoundingClientRect(); el.style.left=r.left+'px'; el.style.top=r.top+'px';
  document.body.appendChild(el); setTimeout(()=>el.remove(),1700);
}

// â”€â”€ GIFT â”€â”€
const PACKETS=[
  {emoji:'ğŸ§§',name:'ç™¾å¹´å¥½åˆ',amount:999,blessing:'æ„¿ä½ ä»¬ç›¸å®ˆç™¾å¹´ï¼Œåˆå’Œç¾æ»¡'},
  {emoji:'ğŸ’',name:'ç™½å¤´å•è€',amount:666,blessing:'æ„¿ä½ ä»¬æ©æ©çˆ±çˆ±ï¼Œç™½å¤´å•è€'},
  {emoji:'ğŸ€',name:'å¹¸ç¦ç¾æ»¡',amount:520,blessing:'520ï¼Œæˆ‘çˆ±ä½ ï¼Œæ°¸è¿œå¹¸ç¦'},
  {emoji:'ğŸŒ¸',name:'èŠ±å¥½æœˆåœ†',amount:388,blessing:'èŠ±å¥½æœˆåœ†äººå›¢åœ†ï¼Œå²å²å¹³å®‰'},
  {emoji:'ğŸŠ',name:'æ—©ç”Ÿè´µå­',amount:288,blessing:'æ—©ç”Ÿè´µå­ï¼Œé˜–å®¶æ¬¢ä¹'},
  {emoji:'ğŸ’•',name:'é‡‘ç‰æ»¡å ‚',amount:188,blessing:'é‡‘ç‰æ»¡å ‚ï¼Œç¦è¿ç»µé•¿'},
  {emoji:'ğŸŒŸ',name:'å–œç»“è‰¯ç¼˜',amount:99.9,blessing:'å¤©ä½œä¹‹åˆï¼Œå–œç»“è‰¯ç¼˜'},
  {emoji:'ğŸ',name:'å¿ƒæƒ³äº‹æˆ',amount:66.6,blessing:'å¿ƒæƒ³äº‹æˆï¼Œä¸‡äº‹å¦‚æ„'},
];

let selectedPacket=null;
let giftTotal=3588;

function renderPackets(){
  const grid=document.getElementById('packets-grid');
  grid.innerHTML=PACKETS.map((p,i)=>`
    <div class="packet-card" id="packet-${i}" onclick="selectPacket(${i})">
      <div class="packet-emoji">${p.emoji}</div>
      <div class="packet-name">${p.name}</div>
      <div class="packet-amount">${p.amount%1===0?p.amount:p.amount.toFixed(1)} <span>å…ƒ</span></div>
      <div class="packet-blessing">${p.blessing}</div>
    </div>`).join('');
}

function selectPacket(i){
  selectedPacket=i;
  document.querySelectorAll('.packet-card').forEach(c=>c.classList.remove('selected'));
  document.getElementById('packet-'+i).classList.add('selected');
  const p=PACKETS[i];
  document.getElementById('summary-packet-name').textContent=p.emoji+' '+p.name;
  document.getElementById('summary-amount').innerHTML=(p.amount%1===0?p.amount:p.amount.toFixed(1))+' <span>å…ƒ</span>';
  document.getElementById('summary-blessing').textContent=p.blessing;
  document.getElementById('gift-custom-amount').value='';
}

function sendGift(){
  const sender=document.getElementById('gift-sender').value.trim();
  const customAmt=parseFloat(document.getElementById('gift-custom-amount').value);
  const customBlessing=document.getElementById('gift-blessing').value.trim();

  let name,amount,blessing,emoji;
  if(customAmt&&customAmt>0){
    amount=customAmt; name='è‡ªå®šä¹‰çº¢åŒ…'; blessing=customBlessing||'ç¥æ–°å©šå¿«ä¹ï¼'; emoji='ğŸ';
  } else if(selectedPacket!==null){
    const p=PACKETS[selectedPacket]; amount=p.amount; name=p.name; blessing=p.blessing; emoji=p.emoji;
  } else { alert('è¯·é€‰æ‹©ä¸€ä¸ªçº¢åŒ…ï¼Œæˆ–å¡«å†™è‡ªå®šä¹‰é‡‘é¢ ğŸ§§'); return; }

  const senderName=sender||'åŒ¿åå®¾å®¢';
  const now=new Date(); const time=now.getHours()+':'+String(now.getMinutes()).padStart(2,'0');
  const displayAmt=amount%1===0?amount:amount.toFixed(1);
  giftTotal+=amount;

  const list=document.getElementById('gift-list');
  const item=document.createElement('div'); item.className='gift-item';
  item.innerHTML=`
    <div class="gift-item-left">
      <div class="gift-item-emoji">${emoji}</div>
      <div class="gift-item-info">
        <div class="gift-item-sender">${senderName}</div>
        <div class="gift-item-name">${name} Â· ${blessing}</div>
      </div>
    </div>
    <div class="gift-item-right">
      <div class="gift-item-amount">Â¥${displayAmt}</div>
      <div class="gift-item-time">${time}</div>
    </div>`;
  list.prepend(item);

  document.getElementById('gift-total').textContent='Â¥'+giftTotal.toLocaleString();

  // notify in chat
  const msgs=document.getElementById('chat-msgs');
  const msg=document.createElement('div'); msg.className='chat-msg-item gift-msg';
  msg.innerHTML=`<strong>ğŸ§§ ${senderName}</strong> é€å‡ºã€Œ${name}ã€Â· Â¥${displayAmt}`;
  msgs.appendChild(msg); msgs.scrollTop=msgs.scrollHeight;

  // reset
  selectedPacket=null;
  document.querySelectorAll('.packet-card').forEach(c=>c.classList.remove('selected'));
  document.getElementById('summary-packet-name').textContent='çº¢åŒ…å·²é€å‡º ğŸ‰';
  document.getElementById('summary-amount').innerHTML=displayAmt+' <span>å…ƒ</span>';
  document.getElementById('summary-blessing').textContent=blessing;
  document.getElementById('gift-sender').value='';
  document.getElementById('gift-custom-amount').value='';
  document.getElementById('gift-blessing').value='';
  alert('ğŸ§§ çº¢åŒ…é€å‡ºæˆåŠŸï¼\n\n'+name+' Â· Â¥'+displayAmt+'\n"'+blessing+'"');
}

// â”€â”€ MESSAGES â”€â”€
let selectedMood='â¤ï¸';
let currentFilter='all';

const INIT_MESSAGES=[
  {sender:'èˆ…å¦ˆä¸€å®¶',relation:'family',text:'çœ‹ç€ä½ ä»å°é•¿å¤§ï¼Œä»Šå¤©çœ‹åˆ°ä½ ç©¿ä¸Šå©šçº±ï¼Œèˆ…å¦ˆçœŸçš„å“­äº†ã€‚æ„¿ä½ å’Œç£Šç£Šç›¸äº²ç›¸çˆ±ï¼Œå¹¸ç¦ä¸€è¾ˆå­ï¼',mood:'ğŸ˜­',hearts:12,time:'14:35',id:1},
  {sender:'å¤§å­¦å®¤å‹å››äººç»„',relation:'friend',text:'å››å¹´ä¸€èµ·ç¡ä¸Šä¸‹é“ºï¼Œä½ ç»ˆäºå«å‡ºå»äº†ï¼å“ˆå“ˆå“ˆå“ˆï¼Œç¥ä½ ä»¬æ–°å©šå¿«ä¹ï¼Œæœ‰ç©ºå›æ¥å–ä½ çš„å–œé…’ï¼',mood:'ğŸ‰',hearts:24,time:'14:28',id:2},
  {sender:'å‰åŒäº‹å°ç‹',relation:'colleague',text:'å½“åˆåœ¨å…¬å¸çœ‹ä½ ä»¬ç›¸è¯†ï¼Œæ²¡æƒ³åˆ°çœŸçš„èµ°åˆ°äº†ä»Šå¤©ã€‚ç¥ä½ ä»¬è¶Šæ¥è¶Šå¥½ï¼Œå·¥ä½œé¡ºåˆ©ï¼Œæ„Ÿæƒ…ç”œèœœï¼',mood:'ğŸ¥‚',hearts:8,time:'14:22',id:3},
  {sender:'å¤–å©†ï¼ˆé€šè¿‡å¥³å„¿ä»£å‘ï¼‰',relation:'family',text:'å¤–å©†å¹´çºªå¤§äº†æ¥ä¸äº†ï¼Œå¿ƒé‡Œä¸€ç›´æƒ³ç€ä½ ã€‚å©·å©·ï¼Œè¦å¥½å¥½ç…§é¡¾è‡ªå·±ï¼Œæ‰¾åˆ°å¥½äººäº†å°±è¦å¥½å¥½çæƒœã€‚',mood:'â¤ï¸',hearts:31,time:'14:15',id:4},
  {sender:'é«˜ä¸­æ­»å…š',relation:'friend',text:'æˆ‘ä»¬è®¤è¯†å¤šå°‘å¹´äº†ï¼ä½ ç»ˆäºæˆæ–°å¨˜äº†ï¼Œæˆ‘éª„å‚²ï¼ä¸‹æ¬¡è§é¢è¯·æˆ‘åƒä½ çš„æ»¡æœˆé…’å“¦å“ˆå“ˆï¼',mood:'ğŸŒ¸',hearts:19,time:'14:08',id:5},
  {sender:'é¢†å¯¼å’ŒåŒäº‹ä»¬',relation:'colleague',text:'æ­å–œæå©·ï¼Œä½ æ˜¯æˆ‘ä»¬éƒ¨é—¨æœ€å…ˆæˆå®¶çš„ï¼å·¥ä½œè®¤çœŸï¼Œç”Ÿæ´»å¹¸ç¦ï¼Œæˆ‘ä»¬éƒ½ä¸ºä½ é«˜å…´ã€‚æ–°å©šå¿«ä¹ï¼',mood:'ğŸ™',hearts:6,time:'13:55',id:6},
];

let messages=[...INIT_MESSAGES];
let likedIds=new Set();

function renderMessages(){
  const wall=document.getElementById('messages-wall');
  const filtered=currentFilter==='all'?messages:messages.filter(m=>m.relation===currentFilter);
  wall.innerHTML=filtered.map(m=>`
    <div class="message-card from-${m.relation}" id="msg-card-${m.id}">
      <div class="msg-header">
        <div>
          <div class="msg-sender-name">${m.sender}</div>
          <div class="msg-relation">${relationLabel(m.relation)}</div>
        </div>
        <div class="msg-mood">${m.mood}</div>
      </div>
      <div class="msg-text">${m.text}</div>
      <div class="msg-footer">
        <div class="msg-time">${m.time}</div>
        <div style="display:flex;align-items:center;gap:4px">
          <button class="msg-heart-btn ${likedIds.has(m.id)?'liked':''}" onclick="toggleHeart(${m.id})">â™¥</button>
          <span class="msg-heart-count" id="hearts-${m.id}">${m.hearts}</span>
        </div>
      </div>
    </div>`).join('');
  document.getElementById('stat-total').textContent=messages.length;
  document.getElementById('stat-hearts').textContent=messages.reduce((s,m)=>s+m.hearts,0);
  document.getElementById('stat-family').textContent=messages.filter(m=>m.relation==='family').length;
}

function relationLabel(r){
  return {family:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶äºº',friend:'ğŸ‘¯ æœ‹å‹',colleague:'ğŸ’¼ åŒäº‹/åŒå­¦',other:'ğŸŒŸ å…¶ä»–'}[r]||r;
}

function toggleHeart(id){
  const m=messages.find(m=>m.id===id); if(!m)return;
  if(likedIds.has(id)){likedIds.delete(id);m.hearts--;} else {likedIds.add(id);m.hearts++;}
  renderMessages();
}

function filterMsgs(type,btn){
  currentFilter=type;
  document.querySelectorAll('.filter-tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  renderMessages();
}

function selectMood(btn,emoji){
  selectedMood=emoji;
  document.querySelectorAll('.mood-btn').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
}

function updateCharCount(){
  const t=document.getElementById('msg-text').value;
  document.getElementById('char-count').textContent=t.length;
}

function submitMessage(){
  const sender=document.getElementById('msg-sender').value.trim();
  const text=document.getElementById('msg-text').value.trim();
  const relation=document.getElementById('msg-relation').value;
  if(!sender){alert('è¯·å¡«å†™ä½ çš„åå­— ğŸ˜Š');return;}
  if(!text||text.length<5){alert('è¯·å†™ä¸‹è‡³å°‘5ä¸ªå­—çš„ç¥ç¦ ğŸ’Œ');return;}
  const now=new Date();
  const time=now.getHours()+':'+String(now.getMinutes()).padStart(2,'0');
  const newMsg={sender,relation,text,mood:selectedMood,hearts:0,time,id:Date.now()};
  messages.unshift(newMsg);
  renderMessages();
  document.getElementById('msg-sender').value='';
  document.getElementById('msg-text').value='';
  document.getElementById('char-count').textContent='0';
  document.getElementById('msg-blessing').value='';
  selectedMood='â¤ï¸';
  document.querySelectorAll('.mood-btn').forEach(b=>b.classList.remove('selected'));
  document.querySelector('.mood-btn').classList.add('selected');
  alert('ğŸ’Œ ç¥ç¦å·²é€è¾¾ï¼\næ–°äººä¼šåœ¨å©šç¤¼ç»“æŸåäº²è‡ªå›æ¥é˜…è¯»ä½ çš„å¿ƒæ„ã€‚');
}

let coupleViewMode=false;
function toggleCoupleView(){
  coupleViewMode=!coupleViewMode;
  const btn=document.querySelector('.couple-view-btn');
  const writeSection=document.getElementById('write-section');
  if(coupleViewMode){
    btn.textContent='é€€å‡ºå›çœ‹æ¨¡å¼';
    btn.style.background='#c0392b';
    writeSection.style.display='none';
    document.querySelector('.couple-view-title').textContent='ğŸ’‘ æ–°äººå›çœ‹æ¨¡å¼ â€” å©šåä¸“å±æ—¶å…‰';
    document.querySelector('.couple-view-sub').textContent='æ­£åœ¨ä»¥æ–°äººèº«ä»½æµè§ˆæ‰€æœ‰ç¥ç¦ï¼Œæ„Ÿå—æ¯ä¸€ä»½å¿ƒæ„ â¤ï¸';
  } else {
    btn.textContent='è¿›å…¥å›çœ‹æ¨¡å¼';
    btn.style.background='';
    writeSection.style.display='block';
    document.querySelector('.couple-view-title').textContent='æ–°äººä¸“å±å›çœ‹æ¨¡å¼';
    document.querySelector('.couple-view-sub').textContent='å©šç¤¼ç»“æŸåï¼Œç‚¹å‡»è¿™é‡Œä»¥æ–°äººèº«ä»½æ…¢æ…¢å›å‘³æ¯ä¸€æ¡ç¥ç¦';
  }
}

// â”€â”€ INIT â”€â”€
renderPackets();
renderMessages();
</script>
</body>
</html>
